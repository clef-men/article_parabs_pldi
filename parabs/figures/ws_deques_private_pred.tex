\begin{figure}
\begin{mathpar}
    \infer[sender-exclusive]{
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_1\ \v{state}_1
      \\\\
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_2\ \v{state}_2
    }{
      \iFalse
    }
  \and
    \infer[waiting-receiver]{
        \l{channels-waiting}\ \iGname\ i
      \\\\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo\ (\Some{o})
    }{
      \iFalse
    }
  \and
    \infer[sender-receiver-agree]{
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_1\ (\Some{o_1})
      \\\\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo_2\ (\Some{o_2})
    }{
      {\begin{inbox}[t]
        \iLater (\iPredTwo_1\ o_1 \equiv \iPredTwo_2\ o_1) \iSep \\
        o_1 = o_2 \iSep \\
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_1\ (\Some{o_1}) \iSep \\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo_2\ (\Some{o_1})
      \end{inbox}}
    }
  \and
    \infer[prepare]{
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_1\ \None
      \\\\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo_2\ \None
    }{
      \iBupd
      {\begin{inbox}[t]
        \l{channels-sender}\ \iGname\ i\ \iPredTwo\ \None \iSep \\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo\ \None
      \end{inbox}}
    }
  \and
    \infer[send]{
        \l{channels-waiting}\ \iGname\ i
      \\\\
        \l{channels-sender}\ \iGname\ i\ \iPredTwo\ \None
    }{
      \iBupd
      \l{channels-sender}\ \iGname\ i\ \iPredTwo\ (\Some{o})
    }
  \and
    \infer[receive]{
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_1\ (\Some{o})
      \\\\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo_2\ \None
    }{
      {\begin{inbox}[t]
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_1\ (\Some{o}) \iSep \\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo_2\ (\Some{o})
      \end{inbox}}
    }
  \and
    \infer[reset]{
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_1\ (\Some{o_1})
      \\\\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo_2\ (\Some{o_2})
    }{
      \iBupd
      {\begin{inbox}[t]
        \l{channels-waiting}\ \iGname\ i \iSep \\
        \l{channels-sender}\ \iGname\ i\ \iPredTwo_1\ \None \iSep \\
        \l{channels-receiver}\ \iGname\ i\ \iPredTwo_2\ \None
      \end{inbox}}
    }
\end{mathpar}
\caption{\ocamlinline{Ws_deques_private}: \l{channels} theory}
\label{fig:parabs_ws_deques_private_channels}
\end{figure}
